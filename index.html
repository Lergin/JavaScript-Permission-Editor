<!doctype html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Permissioneditor 0.1.3</title>
  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

  <!-- build:css styles/main.css -->
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild-->

  <!-- build:js bower_components/webcomponentsjs/webcomponents.min.js -->
  <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
  <!-- endbuild -->

  <!-- will be replaced with elements/elements.vulcanized.html -->
  <link rel="import" href="elements/elements.html">
  <!-- endreplace-->
</head>

<body unresolved layout vertical>
    <polymer-element name="permission-edit">
        <template>
            <link rel="stylesheet" href="styles/main.css">
            <core-ajax id="ajax" auto url="scripts/plugins.json" handleAs="json" response="{{permissions}}" on-core-response="{{test}}"></core-ajax>
            <button on-tap="{{openimportfkt}}">Import</button>
            
            <paper-dialog transition="core-transition-top" opened="{{openimport}}">
                <div style="height: 80vh;width:80vw">
                    <textarea style="height: 100%;width: 100%" value="{{yaml}}" placeholder="Import"></textarea>
                </div>
            </paper-dialog>
            
            <button on-tap="{{save}}{{openexportfkt}}">Export</button>
            
            <paper-dialog transition="core-transition-top" opened="{{openexport}}">
                <div style="height: 80vh;width:80vw">
                    <textarea style="height: 100%;width: 100%" value="{{yamlnew}}" placeholder="Export"></textarea>
                </div>
            </paper-dialog>
      
            <yaml-js yaml="{{yaml}}" js="{{jsnew}}" mode="tojs" on-core-ready="{{loadPermissions}}"></yaml-js>
            <yaml-js yaml="{{yamlnew}}" js="{{js}}" mode="toyaml" on-core-ready="{{loadPermissions}}"></yaml-js>
            
            
            
            
            <paper-tabs selected="{{selectedVersion}}">
                <paper-tab>Old View</paper-tab>
                <paper-tab>AnonymusChaotics Idee</paper-tab>
            </paper-tabs>
            <template if="{{selectedVersion}}">
                <div layout horizontal>
                    <div style="width:15%">
                    <core-selector selected="{{SelectedGroup}}">
                        <template repeat="{{group in groups}}">
                            <paper-item>{{group.name}}</paper-item>
                        </template>
                    </core-selector>
                </div>
                <div style="width:15%">
                    <core-selector selected="{{SelectedPlugin}}">
                        <template repeat="{{plugin, index in permissions}}">
                            <paper-item>{{plugin.plugin}}</paper-item>
                        </template>
                    </core-selector>
                </div>
                <div>
                    <template if="{{SelectedGroup != undefined}}" repeat="{{permission in permissions[SelectedPlugin].permissions}}">
                        <div style="margin-top:5px" class="item" layout horizontal>

                                <paper-checkbox checked?="{{groups[SelectedGroup].permissions[plugin.plugin][permission.name]}}" on-change="{{checkboxchanged}}"></paper-checkbox>   
                                <div style="width:200px; margin-left: 5px">
                                {{permissions[SelectedPlugin].plugin}}.{{permission.name}}
                                </div>
                                {{permission.description}}
                                </div>

                    </template>
                    </div>
                </div> 
            </template>
            
            <template if="{{!selectedVersion}}">
            <div layout horizontal>
                <div style="width:15%"></div>
                <template repeat="{{group in groups}}" layout horizontal>
                    <div flex>{{group.name}}</div>
                </template>
            </div>
            
            <template repeat="{{plugin, index in permissions}}">
                
                <div divider class="divider row">
                    <hr>
                    <div layout horizontal>
                        <div style="width:15%" on-click="{{toggle}}">
                            <b>{{plugin.plugin}}</b><span style="display:none">{{index}}</span>
                        </div>
                        <template repeat="{{group in groups}}">
                            <div flex>  
                                <core-tooltip label="{{plugin.plugin}}.*" position="right">
                                    <paper-checkbox checked?="{{group.permissions[plugin.plugin]['*']}}" on-change="{{allcheckboxchanged}}"></paper-checkbox>
                                </core-tooltip>
                            </div>
                        </template>
                    </div>
                </div>
                <core-collapse opened?="{{plugin.toggle}}">
                    <template repeat="{{permission in plugin.permissions}}">
                        <div class="item" layout horizontal>
                            
                            <div style="width:15%">
                                <core-tooltip label="{{permission.description}}" position="right">
                                    {{plugin.plugin}}.{{permission.name}}
                                </core-tooltip>
                            </div>
                           
                            <template repeat="{{group in groups}}">
                                <div flex>
                                    <core-tooltip label="{{plugin.plugin}}.{{permission.name}}" position="right">
                                        <paper-checkbox checked?="{{group.permissions[plugin.plugin][permission.name]}}" on-change="{{checkboxchanged}}"></paper-checkbox>
                                    </core-tooltip>
                                </div>
                            </template>
                        </div>
                    </template>
                </core-collapse>
            </template>
            </template>
        </template>

        <!-- build:js scripts/app.js -->
        <script src="scripts/app.js"></script>
        <!-- endbuild-->
    </polymer-element>
    <permission-edit id="pedit"></permission-edit>
    <a href="http://lergin.lima-city.de/impressum.html" rel="nofollow">Impressum</a>
    <a href="http://lergin.lima-city.de/datenschutz.html" rel="nofollow">Datenschutz</a>
</body>

</html>
